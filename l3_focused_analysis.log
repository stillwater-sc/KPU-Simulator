(p311) stillwater@sw-21:~/dev/stillwater/clones/KPU-simulator$ build/examples/compiler/l3_focused_analysis
████████████████████████████████████████████████████████████████████████████
█                                                                          █
█              FOCUSED L3 OVERFETCH ANALYSIS                               █
█                                                                          █
█  Representative workloads × Dataflow strategies × L3 sizes              █
█                                                                          █
████████████████████████████████████████████████████████████████████████████

Workloads: 12
Strategies: 3 (WS, IS, OS)
L3 sizes: 5 (1MB, 2MB, 16MB, 64MB, 256MB)
Total configurations: 180

Starting analysis...

Analyzing: Small Square (512×512×512)
  Progress: 15/180 complete
Analyzing: Medium Square (2048×2048×2048)
  Progress: 30/180 complete
Analyzing: Tall: Long Context (16384×512×512)
  Progress: 45/180 complete
Analyzing: Tall: Batch Inference (8192×1024×1024)
  Progress: 60/180 complete
Analyzing: Wide: Vocab Projection (512×16384×2048)
  Progress: 75/180 complete
Analyzing: Wide: Large Vocab (256×32768×1536)
  Progress: 90/180 complete
Analyzing: Deep: MLP Up (1024×1024×8192)
  Progress: 105/180 complete
Analyzing: Deep: Extreme MLP (512×512×16384)
  Progress: 120/180 complete
Analyzing: BERT Q×K^T (2048×2048×768)
  Progress: 135/180 complete
Analyzing: GPT-2 MLP (2048×1536×6144)
  Progress: 150/180 complete
Analyzing: LLaMA-2 7B Attn (4096×4096×4096)
  Progress: 165/180 complete
Analyzing: User Example 32k×7k (32768×7168×7168)
  Progress: 180/180 complete

╔════════════════════════════════════════════════════════════════════╗
║                    ANALYSIS COMPLETE                               ║
╚════════════════════════════════════════════════════════════════════╝

Completed in 301 seconds
Analyzed 180 configurations
Results: l3_focused_analysis.csv

Key insights to explore in the CSV:
  1. Group by Aspect → Compare overfetch for Square vs Tall vs Wide vs Deep
  2. Group by Strategy → Which strategy (WS/IS/OS) is best for each aspect?
  3. Group by L3_Size → Where's the knee for each workload type?
  4. Look at per-tensor overfetch (A, B, C) → Which tensor dominates?

Quick analysis commands:
  # See overfetch by strategy
  awk -F',' 'NR>1 {sum[$7]+=$9; count[$7]++} END {for(s in sum) print s, sum[s]/count[s]}' l3_focused_analysis.csv

  # See overfetch by aspect ratio
  awk -F',' 'NR>1 {sum[$3]+=$9; count[$3]++} END {for(a in sum) print a, sum[a]/count[a]}' l3_focused_analysis.csv

